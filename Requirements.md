## requirement-Skills
- 如果一群来自Google的顶级工程师，对基于jsmacros的脚本开发工作进行分析，他们会认为有哪些必要的claude Skills可以派上用场，使用skill-creator这个skill创建他们认为重要的Skills
- 用户还需要一个修复jsmacros脚本问题的skill，如果是一群来自Google的顶级工程师，会如何使用skill-creator创建能满足用户需求的skill？

## rerequirement-1
 提示：
 - 被种植的方块不是游戏原版的方块，而是由服务器作者自定义的含有容器GUI的特殊方块。该方块的交互逻辑为：
 如果空手交互方块就会打开一个容器GUI，可以使用操作容器的方法将物品放入；如果手上拿着"soil","fertilizer","seeds"等可以被放入的物品进行一次交互，则会不打开容器GUI，直接将手中物品放入容器中，为了种植的效率，脚本必须使用第二种方法将物品放入容器。
 - 由于服务器延迟较高，如果方案中有用到验证也必须使用异步或其他不减慢脚本速度的办法，因为用户的硬性要求是不能减慢脚本执行速度
 - 该脚本不会因视角不同步导致的交互失败
 - 难点在于每个被种植的方块必须被交互一次，且只能交互一次，不能多也不能少。少了的话种植产量减少，多了的话会导致后续种植工作出现混乱
 如果是一群来自Google的顶级工程师会给出什么方案来解决该问题？

## rerequirement-2
  * 2. 分析@Original\planting\种植_v3.js脚本中平滑转动视角的问题。
  用户测试发现的几个问题：
  - 由于是一边转动视角一边移动，所以当转动视角的角度过大时，角色的移动路径会变得奇怪进而导致后续交互问题
  - 平滑转动视角虽然很平滑，但是机械感太强，与真正的玩家视角还有差距。分析可优化的方向。
  如果是一群来自Google的顶级工程师会给出什么方案？

  用户希望按照此方法进行修改
  修改时想想Google的顶级工程师会怎么做

  上述修改完成后，用户测试中发现：
  当某一次背包中物品数量不足，前往箱子补充物品时，用户观察到的操作是：
  1. 移动到箱子，打开箱子，未从箱子中取出物品，直接关闭了箱子
  2. 角色背包中物品数量未变，就又继续走向待种植的方块尝试种植
  3. 尝试种植时发现背包中物品数量不足，又前往箱子补充物品，与之前一样再次失败。

  如果是一群来自Google的顶级工程师会如何分析出问题所在。

  从箱子中补货失败的问题还未解决。
  用户测试中发现问题所在，从箱子中补货失败的情况是角色背包中槽位被所需物品占满（物品是可堆叠的，一个槽位可以放一组64个物品），但实际上每个槽位中的物品都低于补货阈值。

## rerequirement-3
  @Original\planting\浇水.js 脚本只需要与每个5×5区域的中心方块进行交互，而不是像@Original\planting\种植_v3.js 除了中心方块，其余每个方块都进行交互，所以遍历逻辑好像不能复用。
后续的2 3 4点改进方向暂不考虑。
当前用户仅有一个需求：
原本的遍历方向是：
  区域总览 (X轴: 207-276, Z轴: 329-393):
   Z=331 ──┬────────────────────────────────────────
           │  209  214  219  ...  264  269  274
   Z=336 ──┼  274  269  264  ...  219  214  209
   Z=341 ──┼  209  214  219  ...  264  269  274
   Z=346 ──┼  274  269  264  ...  219  214  209
   ...     │  ...    ...   ...   ...   ...   ...
   Z=391 ──└────────────────────────────────────────
      方向: → → → → → → → →  然后换行
          ← ← ← ← ← ← ← ←  然后换行
          → → → → → → → →
   即从左上角开始朝右边横向蛇形遍历
   现在用户希望改为从左下角开始朝上竖向蛇形遍历:
  ↑ ↓ ↑ ↓ ↑ 
  ↑ ↓ ↑ ↓ ↑ 
  ↑ ↓ ↑ ↓ ↑ 
  ↑ ↓ ↑ ↓ ↑ 
  ↑ ↓ ↑ ↓ ↑ 
  ↑ ↓ ↑ ↓ ↑ 

## rerequirement-4
 收菜 脚本中的遍历逻辑以及某些部分与 _v3 一致，分析收菜目前能够快速对齐Original\planting\services中services的地方。

  执行到背包满时，要前往箱子存放满背包的物品时报错

## rerequirement-5
  用户想将浇水脚本集成到 种植 脚本中，在种植完成后无需再启动另一个脚本来进行浇水。
  分析其中难点，如果是一群来自google的顶级工程师会给出怎样的方案实现上述用户需求？

迭代器必须要保持 5x5 中心点逻辑，新增 IrrigationIterator（新增小型工具类，避免污染核心）
如果你希望我直接落地实现：告诉我你要的集成方式为添加“浇水模式键”，水壶箱子与农田坐标参考。

用户测试发现遍历迭代的坐标存在问题，没有正确交互水源和灌溉方块。
测试时的坐标与原版本脚本代码相同：
// 两对角的坐标点确定区域
const start = [207, 56, 393];
const end = [276, 56, 329];
分析问题原因并解决问题，想想来自Google的顶级工程师会如何解决该问题？

用户测试中发现的一个小问题，当背包中没有浇水壶时，需要从箱子中拿水壶时，只需要拿一个。水壶时功能性道具不是消耗品

测试中发现两个问题：
1. 浇水功能中的lookAt不平滑，是否可以直接调用_smoothLookAt()，或者复用类似函数
2. 

遍历逻辑的问题，
- 当前的顺序是 1)角色朝向并移动至中心方块（灌溉方块），2)抬头与waterSource交互进行取水，3)看向中心方块交互进行浇水
- 原版本中的浇水脚本中的顺序是1)角色朝向waterSource进行向前的移动，2)角色移动至能够与waterSource交互取水的范围时直接与waterSource交互取水 3)角色看向中心方块交互进行浇水

现版本比原版本多了一步操作，效率慢了。对当前代码进行修改

用户观察到角色的视角转动速度太慢，导致叫说工作速度也很慢，应该如何优化？

## rerequirement-6
当前的种植脚本的拓展性有一些问题，用户发现的一个关于拓展性中比较重要的问题：
- 种植是一个字符串数组，且被归为一种东西，但是不同的作物有不同的种子，不同的果实，同种作物之间的果实还有1星2星3星三种等级，通过前缀特殊字符进行区分，ꢲ Apple:3星苹果，ꢳ Apple: 2星苹果，至于1星苹果，显然就是这两个字符以外的其他特殊字符前缀，即ꢲ前缀的作物代表3星，ꢳ前缀的代表2星。

如果一群来自Google的顶级工程师还会分析出哪些有关拓展性的问题？
补充说明"ꢴ "是1星前缀，还有一个特殊的金色品质，前缀是 "Golden "

纠正方案中有关物品的错误：
1. 1个apple basket是由9个星级相同的apples在工作台以3×3的摆放合成的，所以basket也有星级，星级与合成该basket的作物星级一致，Golden品质作物不能合成basket
2. 同一种类不同星级的作物在Jacko那里的售价也不相同，与售价有关的配置可以留空等待用户填写

3星Apple Baskets就是ꢲ Apple Basket
再提醒一些重点：
- 脚本中所有物品的信息都必须使用物品name，千万不能使用原生的物品id，类似"minecraft:apple"这样的
- 补货只使用star3的篮子
1星/2星 作物不允许上架和出售，后续的扩展中可能会用到，但目前暂时只有区分作物品级的作用

### 测试问题
1. 测试过程中，对Jacko进行售卖作物时，golden 品质的作物没有正确出售
2. 当有玩家通过AH购买作物时，虽然有log信息，但是没有进行补货操作
lilster03 bought your 64x ꢲ Apple for 800 rubies!
[Vending][Auction][INFO] Default price set to 800.
[Vending][Queue][INFO] Queued sale: 64x Apple (star3).
[Vending][Auction][INFO] Listed 64x ꢲ Apple from slot 21 at 800.

如果是一群来自Apple的顶级工程师会如何分析问题并给出解决方案？

可以确定的一点是作物前缀不可叠加，不可能出现类似"Golden ꢲ Apple"这样的作物name
用户认为可以对golden作物的售卖使用一个很简单的逻辑，无论角色的背包中是否有golden作物，都对jacko中的golden槽位进行quick()操作，即售卖操作

启动@Original\planting\作物自动售货机-v2.js 脚本后，log信息中显示[Vending][Jacko][WARN] Not enough ꢲ Banana (64/192).
但是脚本却没有执行从箱子中拿出baskets拆分为多组banana的操作，而是直接使用指令去往jacko进行售卖
分析问题所在，并给出解决方案

## rerequirement-7
ulw 
种植的前置操作 判断箱子中 soil,fertilizer,seeds是否充足，如果不充足则进行购买。
soil,fertilizer是写在配置中的固定箱子，
但是由于有多种不同作物，所以不同作物的seeds存放在不同箱子，需要选择存放种子的箱子后才能确定需要哪种种子。

判断箱子中缺少物品的操作逻辑：
1. 按照soil,fertilizer,seeds的顺序进行判断和购买，举例：如果soil缺少，则先完成soil购买补充的操作后，再判断fertilizer是否缺少，是否需要购买补充，然后在判断seeds是否缺少，是否需要购买补充。

购买soil或fertilizer的操作逻辑：
1. 传送到yellow balloon
2. 走向[-75,69,-133]→走向[-80,71,-141]并与在该坐标站着的Jeckyl交互两次（交互逻辑与Jacko一样）打开购买界面
3. 使用quick()函数对短缺的物品进行购买，箱子里缺少多少就购买多少，如果背包中能够存放的数量少于箱子缺少的数量，就将背包购买满。

购买seeds的操作逻辑：
1. 与前往Jacko并与其交互的操作一样，可以完全直接使用Original\planting\services\JackoService.js中的_interactWithJacko()函数
2. 打开购买种子界面（容器）
3. 在当前界面获取需要补充的种子的名称，若找到则使用quick()函数对缺少的种子进行购买
4. 如果没有获取到需要补充的种子的名称，则点击名为Next Page按钮，切换到下一页
5. 在下一页中获取需要补充的种子的名称，使用quick()函数对缺少的种子进行购买

tips：
- 背包满的判断条件是背包中没有空槽位，且仅有少于或等于1个槽位中的补充的物品（soil，fertilizer，seeds）数量小于64，其余空槽位均被64个需要补充的物品填满; 箱子满的判断条件是箱子中没有空槽位，且仅有少于或等于1个槽位中的补充的物品（soil，fertilizer，seeds）数量小于64，其余空槽位均被64个需要补充的物品填满。
- 时刻记得是否能够复用现有代码。

如果是一群来自Apple的顶级工程师，他们会如何根据现有代码规划并实现需求？

- 核心假设均正确
- 种子类型判定改为写入配置文件类似如下结构
    "seedsByCrop": {
      "apple": {
        "supply": [216, 54, 396],
        "dump": [216, 58, 398]
      },
      "mango": {
        "supply": [215, 54, 396],
        "dump": [215, 58, 398]
      },
    }
- 确认“箱子满 = 充足”

用户操作：
1. 启动种植v3脚本
2. 选择作物种子箱与起点
3. 按下1键选择soil模式

脚本执行：
前往两个存储soil的箱子检查是否充足，打开第一个supply箱子后，log信息输出错误：
[Event Error] execute on xyz.wagyourtail.jsmacros.client.api.helpers.inventory.ItemStackHelper failed due to: Message not supported.
如果是一群来自Apple的顶级工程师，他们会如何分析该问题并给出解决方案？

由于该服务器中很多物品是服务器管理员自定义的，这就导致了这些自定义的物品的name不同，但id完全相同，所以要区分这些物品必须使用物品的name，不能使用物品的id。

检查存放种植物品的箱子中物品是否充足时需要检查两个箱子，即dump和supply箱子都应该检查并确认是否充足，并在不充足时进行购买补充

测试中没有与Jeckyl正确交互打开购买界面，用户观察到两个问题
1. 移动结束时距离npc较远，无法与npc交互
2. 与npc交互操作时，瞄准的时npc边缘，这会导致第二次与npc交互失败。必须完全按照Original\planting\services\JackoService.js中与npc交互的逻辑进行操作

购买种子时出错，测试中购买的mango pit，与jacko交互后在第一页并没有找到mango pit，于是点击Next Page，此时界面中已经可以找到mango pit，但是却关闭了购买界面（容器）并提示"Seed item not found in shop pages."
[Supply][Debug:SeedShopOpen] total=90 main=27 hotbar=9 player=36 container=54 itemSlot=-1 itemName=
[Supply][Debug:SeedShopOpen] targets=Mango Pit
[Supply] Seed item not found in shop pages.
[Supply] Failed to purchase seeds.
[Supply] Pre-check failed.

用户使用@Original\example\example1.js中的读取容器内容功能对jacko的购买界面进行了测试，发现是可以正常读取容器内容的，包括第一页和下一页。
@Original\example\example1.js读取的内容写入到了@Original\bossbars.txt

如果是一群来自Apple的顶级工程师，他们会如何根据当前项目代码库和用户给出的已知信息分析该问题并给出解决方案？

测试中，用户观察到的问题：
脚本启动，第一次检查时supply箱子中物品已经是满的了，dump箱子中物品缺少，但是脚本购买物品回到realm中后会再次检查supply箱子是否充足，将背包中的物品补充到dump箱子中后又会再一次检查supply箱子是否充足，然后再检查dump箱子是否充足。这个逻辑过于冗余且繁琐。
分析该逻辑的执行流程，并为用户提出优化流程供用户查看和确认
如果是一群来自Apple的顶级工程师，他们会如何根据当前项目代码库和用户给出的已知信息分析该问题并给出解决方案？

背包满的判断条件是背包中没有空槽位，且仅有少于或等于1个槽位中的补充的物品（soil，fertilizer，seeds）数量小于64，其余空槽位均被64个需要补充的物品填满; 箱子满的判断条件是箱子中没有空槽位，且仅有少于或等于1个槽位中的补充的物品（soil，fertilizer，seeds）数量小于64，其余空槽位均被64个需要补充的物品填满。
补充后，已经满足上述条件了，但是却输出：
[Supply] fertilizer missing 7. Buying 7...

分析问题所在，并给出解决方案

后续还有一个问题，就是在第一遍检查中，若当角色背包中存在需要补充的物品时，应该将背包中的物品补充到箱子中，而不是直接去购买。

用户测试中发现了问题，不应该在每个模式启动时检查所有物品是否充足。
应该在placing soil模式就只检查soil充足，在fertilizing模式就只检查fertilizer是否充足，在planting seeds就只检查seeds是否充足


TODO 用户测试中发现了问题，完成planting seeds模式后，将种子放入对应的dump箱子中时，会将玩家背包中多余的fertilizer或soil也放进去

@Original\planting\收菜.js 脚本在收菜时当背包被填满后会将背包中的收获转移到预设的箱子中
由于网络延迟，在背包被填满后，看向并控制角色移动到预设的箱子坐标时，此时最后一个attck的目标方块很可能会被打破，导致玩家后续需要手动修复种植田。（被种植田方块不是游戏原版的土方块，而是由服务器作者自定义的特殊方块。）
如果是一群来自Apple的顶级工程师，他们会如何分析找到问题所在，并给出解决方案？

用户想到的一个解决方案是，当角色背包只有一个空槽位时，就尝试将attack的间隔加长做一个缓冲，在使用长间隔的attack三到五次后，无论背包有没有满就直接去将背包中的物品移动到箱子中

如果是一群来自Apple的顶级工程师，他们会如何根据当前项目代码库实现该修改需求？

## rerequirement-8
